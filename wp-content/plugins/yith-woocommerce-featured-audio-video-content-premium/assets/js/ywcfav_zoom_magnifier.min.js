jQuery(document).ready(function(a){function i(){var i=a("a.ywcfav_video_show_modal"),e=a("a.ywcfav_audio_show_modal");e.venobox(),i.venobox()}function e(){var e={product_id:ywcfav_zoom_param.product_id,action:ywcfav_zoom_param.actions.get_featured_content};a(".images").block(_),a.ajax({type:"POST",data:e,url:ywcfav_zoom_param.admin_url,dataType:"json",success:function(e){if(e.result){var o=a(document).find(".yith_magnifier_zoom_wrap");o.before(e.template),o.addClass("ywcfav_has_featured")}i(),t(o.parent()),s=!1,a(".images").unblock()}})}var o=null,d=a("form.variations_form"),s=!1,_={message:null,overlayCSS:{background:"#fff",opacity:.6},ignoreIfBlocked:!0},c=function(a){var i=a.find('div[class^="ywcfav_video"]'),e=a.find('div[class^="ywcfav_audio"]'),o=!1;if(i.hide(),e.hide(),i.size()){if(i.hasClass("host")){var d=i.data("video_id");"undefined"!=typeof d&&videojs(d).dispose()}i.remove(),o=!0}return e.size()&&(e.remove(),o=!0),o},t=function(a){var i=a.find('>div[class^="ywcfav_video"]'),e=a.find('>div[class^="ywcfav_audio"]');i.length&&i.css("z-index",0),e.length&&e.css("z-index",0)};a(".variations_form").on("show_variation",function(i,e){o=e;var d=a('div[class^="ywcfav_video"]'),s=a('div[class^="ywcfav_audio"]');d.removeClass("ywcfav_hide"),s.removeClass("ywcfav_hide")}).on("reset_data",function(i){o=null;var e=a('div[class^="ywcfav_video"]'),d=a('div[class^="ywcfav_audio"]');e.removeClass("ywcfav_hide"),d.removeClass("ywcfav_hide")}),e(),a(document).on("yith_magnifier_after_init_zoom",function(e){var n=a(".images"),f=n.find(".yith_magnifier_zoom_wrap:eq(0)"),v=a('div[class^="ywcfav_video"]'),r=a('div[class^="ywcfav_audio"]');if(v.hasClass("ywcfav_hide")||r.hasClass("ywcfav_hide"))s||(s=!0,f.removeClass("ywcfav_has_featured").show()),s=!1;else if(null!=o){if(!s){if(a(".images").block(_),s=!0,"undefined"!=typeof o.video_variation){f.hide();var u={video_id:o.video_variation,product_id:o.variation_id,action:ywcfav_zoom_param.actions.change_product_variation_image};c(n),a.ajax({type:"POST",data:u,url:ywcfav_zoom_param.admin_url,dataType:"json",success:function(e){c(n),f.addClass("ywcfav_has_featured").show(),f.after(e.template),i(),t(n),s=!1,a(".images").unblock()}})}else c(n),f.removeClass("ywcfav_has_featured").show(),s=!1;a(".images").unblock()}}else if(d.length&&null==o&&!s){s=!0;var l=a('input:hidden[name="product_id"]').val(),u={product_id:l,action:ywcfav_zoom_param.actions.reset_featured_video};a(".images").block(_),a.ajax({type:"POST",data:u,url:ywcfav_zoom_param.admin_url,dataType:"json",success:function(e){c(n),"no_featured_content"===e.result?f.removeClass("ywcfav_has_featured").show():(f.addClass("ywcfav_has_featured").hide(),f.after(e.template)),i(),t(n),a(".images").unblock(),s=!1}})}}),a(document).on("click",".yith_magnifier_gallery li",function(i){var e=a('div[class^="ywcfav_video"]'),o=a('div[class^="ywcfav_audio"]');e.addClass("ywcfav_hide"),o.addClass("ywcfav_hide")}),"yes"==ywcfav_zoom_param.zoom_option&&(a(document).on("click",".ywcfav_item a.ywcfav_video_as_zoom",function(e){e.preventDefault();var o=a(this).data("product_id"),d=a(this).data("video_id"),n=a(".images"),f=n.find(".yith_magnifier_zoom_wrap:eq(0)");if(!s){s=!0;var v={video_id:d,product_id:o,action:ywcfav_zoom_param.actions.change_video_in_featured};a(".images").block(_),a.ajax({type:"POST",data:v,url:ywcfav_zoom_param.admin_url,dataType:"json",success:function(e){if(c(n),f.addClass("ywcfav_has_featured").hide(),f.after(e.template),i(),t(n),"video"==e.type){var o=a(".ywcfav_video_show_modal");o.length&&"yes"==ywcfav_zoom_param.video_autoplay&&o.click()}a(".images").unblock(),s=!1}})}}),a(document).on("click",".ywcfav_item a.ywcfav_audio_as_zoom",function(e){e.preventDefault();var o=a(this).data("product_id"),d=a(this).data("audio_id"),n=a(".images"),f=n.find(".yith_magnifier_zoom_wrap:eq(0)");if(!s){s=!0;var v={audio_id:d,product_id:o,action:ywcfav_zoom_param.actions.change_audio_in_featured};a(".images").block(_),a.ajax({type:"POST",data:v,url:ywcfav_zoom_param.admin_url,dataType:"json",success:function(e){if(c(n),f.addClass("ywcfav_has_featured").hide(),f.after(e.template),i(),t(n),"audio"==e.type){var o=a(".ywcfav_audio_show_modal");o.length&&"yes"==ywcfav_zoom_param.audio_autoplay&&o.click()}a(".images").unblock(),s=!1}})}}))});