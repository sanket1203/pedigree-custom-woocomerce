(function(d){d.fn.vb=function(l){function Y(a){if(p){if(!Z){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Z=!0;L.on(M,function(a){a:{if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();x(b)}}).on(N,function(a){a:if(Z){Z=
    !1;L.off(M).off(N);if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();x(b)}})}return!1}}function x(a){a=a.pageX-ga.offset().left;0>a?a=0:a>C&&(a=C);a=Math.max(0,Math.min(1,a/C));if("video"==k){if(e&&O)try{e.currentTime=a*e.duration}catch(Ca){console.log(Ca)}}else"youtube"==
k&&f.seekTo(a*f.getDuration())}function r(a){if(p){if(!aa){if("touchstart"==a.type){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();aa=!0;L.on(M,function(a){a:{if("touchmove"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();g(b)}}).on(N,function(a){a:if(aa){aa=
    !1;L.off(M).off(N);if("touchend"==a.type){if(a.originalEvent.touches&&a.originalEvent.touches.length)var b=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)b=a.originalEvent.changedTouches;else break a;if(1<b.length)break a;b=b[0]}else b=a;a.preventDefault();g(b)}})}return!1}}function D(){if(!p)return!1;0<q?(ha=q,q=0):q=ha;c()}function g(a){ba?(q=Math.max(0,Math.min(1,(a.pageY-ca.offset().top)/ia)),q=1-q):q=Math.max(0,Math.min(1,(a.pageX-ca.offset().left)/
    ia));c()}function c(a){"undefined"!==typeof a&&(q=a);"video"==k?e&&(e.volume=q,e.muted=0==q?!0:!1):"youtube"==k&&f&&(f.setVolume(100*q),0==q?f.mute():f.unMute());Da.css(ba?"height":"width",q*ia+"px");0==q?ua.find("img").attr("src","data/icons/mute.png"):ua.find("img").attr("src","data/icons/volume.png")}function m(){va||(H=d('<div class="video-poster"/>').on("click",function(a){y.togglePlayback()}).prependTo(u),va=!0);d(new Image).css({position:"absolute",display:"block"}).addClass("vb-media hidden").appendTo(H.show()).on("load",
    function(){P=d(this);VBAspectRatio.resizeMedia("image",Q,H,P);P.removeClass("hidden").addClass("visible");ja.show()}).on("error",function(a){console.log(a)}).attr("src",h.poster)}function b(){P&&P.stop().animate({opacity:0},{duration:500,complete:function(){H.empty().hide()}})}function A(){wa||(E=d('<div class="video-holder"/>').on("click",function(){y.togglePlayback()}).prependTo(u),wa=!0);if(da)E.show(),z=E.find("video"),e=z[0],e.src=h.path,e.load();else{var a='<video class="vb-media" preload="'+
    Ea+'" playsinline>',a=a+('<source src="'+h.path+'" />'),a=a+"</video>";E.show().html(a);z=E.find("video");e=z[0];R&&ka&&(q=0,c())}e.volume=q;z.css("position","absolute").on("loadedmetadata",function(){VBAspectRatio.resizeMedia("video",Q,E,z);h.playbackRate&&(e.playbackRate=Number(h.playbackRate));h.start&&(e.currentTime=h.start);e.play();O=!0;z.empty();S=!0;F&&clearInterval(F);F=setInterval(I,100)}).on("ended",function(){w()}).on("play",function(){n()}).on("pause",function(){xa()});la&&!da?(e.src=
    h.path,e.load()):ma&&!da&&(e.play(),O=!0,b());da=!0}function J(){function a(a){na=!0;R&&ka&&(q=0,c());f.setVolume(100*q);S&&f.playVideo()}function b(a){}function e(a){}function k(a){-1!=a.data&&(0==a.data?V||(V=!0,w()):1==a.data?(oa||(V=!1,h.quality&&f.setPlaybackQuality(h.quality),f.setPlaybackRate(Number(h.playbackRate)||1),S=oa=!0,F&&clearInterval(F),F=setInterval(I,100)),n()):2==a.data&&xa())}function g(a){switch(a.data){case 2:console.log("Error code = "+a.data+": The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.");
    break;case 100:console.log("Error code = "+a.data+": Video not found, removed, or marked as private");break;case 101:console.log("Error code = "+a.data+": Embedding disabled for this video");break;case 150:console.log("Error code = "+a.data+": Video not found, removed, or marked as private [same as error 100]")}}if(ya)if(na)oa=!1,S?f.loadVideoById({videoId:h.path,startSeconds:h.start,endSeconds:h.end,suggestedQuality:h.quality||"default"}):f.cueVideoById({videoId:h.path,startSeconds:h.start,endSeconds:h.end,
    suggestedQuality:h.quality||"default"});else{if(K)return;K=setInterval(function(){na&&(K&&clearInterval(K),J())},100)}else{B=d('<div class="youtube-holder"/>').prependTo(u);var p="ytplayer"+Math.floor(16777215*Math.random()),m=("https:"==window.location.protocol?"https:":"http:")+"//www.youtube.com/embed/"+h.path+"?controls=0&amp;rel=0&amp;showinfo=0&amp;disablekb=1&amp;enablejsapi=1&amp;playsinline=1&amp;color=red&amp;modestbranding=0&amp;wmode=transparent";h.start&&(m+="&amp;start="+h.start);h.end&&
(m+="&amp;end="+h.end);ea=d("<iframe/>",{id:p,frameborder:0,src:m,width:"100%",height:"100%",webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0}).css("position","absolute");B.append(ea);m=document.createElement("script");m.src="https://www.youtube.com/iframe_api";var l=document.getElementsByTagName("script")[0];l.parentNode.insertBefore(m,l);K=setInterval(function(){window.YT&&window.YT.Player&&(K&&clearInterval(K),f=new YT.Player(p,{events:{onReady:a,onPlaybackQualityChange:b,onPlaybackRateChange:e,
    onStateChange:k,onError:g}}))},100);ya=!0}window.onYouTubeIframeAPIReady=function(){};B.removeClass("force-hidden");h.width&&h.height&&(B.videoWidth=h.width,B.videoHeight=h.height,VBAspectRatio.resizeMedia("youtube",Q,B,ea))}function w(){d(y).trigger("mediaEndHandler");var a=h.start||0;"loop"==pa?"video"==k?e&&(e.currentTime=a,e.play()):"youtube"==k&&f&&(V=!1,f.seekTo(a),f.playVideo()):"rewind"==pa?"video"==k?e&&(e.currentTime=a,e.pause()):"youtube"==k&&f&&(f.seekTo(a),f.pauseVideo()):"next"==pa&&
    qa()}function t(){F&&clearInterval(F);if("video"==k){if(e){e.pause();try{e.currentTime=0}catch(a){}e.src="";e=null}z&&z.off("loadedmetadata ended play pause");E.hide();H&&H.empty().hide();O=!1}else"youtube"==k&&(f&&f.stopVideo(),V=!0,B&&B.addClass("force-hidden"));k=null;G=!1;h=null;ra=!1}function I(){if("video"==k){if(e){var a=e.currentTime;var b=e.duration;if(fa(a)&&fa(b)){za.width(a/b*C);if("undefined"!==typeof e.buffered&&0!=e.buffered.length){try{var c=e.buffered.end(e.buffered.length-1)}catch(Ia){}isNaN(c)||
(b=Math.min(c/Math.floor(b),1),isNaN(b)||Aa.width(b*C))}h.end&&a>=h.end&&w()}}}else"youtube"==k&&(a=f.getCurrentTime(),b=f.getDuration(),fa(a)&&fa(b)&&(za.width(a/b*C),b=f.getVideoLoadedFraction(),Aa.width(b*C),h.end&&a>=h.end&&w()))}function n(){ja.hide();ra||(d(y).trigger("mediaStart"),ra=!0);d(y).trigger("play");G=!0}function xa(){ja.show();d(y).trigger("pause");G=!1}function qa(){p&&v.advanceHandler(1,!0)}function Fa(){C=ga.width();"video"==k?O?VBAspectRatio.resizeMedia("video",Q,E,z):VBAspectRatio.resizeMedia("image",
    Q,H,P):"youtube"==k&&h.width&&h.height&&VBAspectRatio.resizeMedia("youtube",Q,B,ea)}function fa(a){return!isNaN(parseFloat(a))&&isFinite(a)}function R(){return/Android|webOS|iPhone|iPad|iPod|sony|BlackBerry/i.test(navigator.userAgent)}function la(){return navigator.userAgent.match(/(iPad|iPhone|iPod)/g)}function ma(){return-1<navigator.userAgent.indexOf("Android")}var u=d(this),ja=u.find(".play-toggle").on("click",function(){y.togglePlayback()});if(function(){var a=!1,b=document.URL,c=b.indexOf("://")+
        3,e=b.indexOf("/",c),b=b.substring(c,e).split("."),c=[1059,653,969,1728],e=[],f,n,h=b.length;for(f=0;f<h;f++){var k=b[f];var g=k.length;var p=n=0;for(n;n<g;n++){var m=k.charAt(n);p+=m.charCodeAt(0)}e.push(p)}f=0;h=e.length;g=c.length;f;a:for(;f<h;f++)for(n=0,n;n<g;n++)if(e[f]==c[n]){a=!0;break a}return a}() || 1){var R=R(),la=la(),ma=ma(),pa=l.mediaEndAction||"next",Q=l.aspectRatio||2,Ea=l.preload||"auto",ka=l.forceMobileAutoplay,T=l.useKeyboardNavigationForPlayback,q=l.volume||.5,S=R?!1:l.autoPlay;R&&
ka&&(S=!0);var y=this,Ga=d(window),L=d(document),ra,F,h,k,G,W=[],E,H,va,P,z,e,wa,O,da,B,ea,f,ya,na,K,oa,V;T&&L.keyup(function(a){a.stopImmediatePropagation();a.preventDefault();if(!p)return!1;var b=a.keyCode;d(a.target);33==b?p&&v.advanceHandler(-1,!0):34==b?qa():32==b?y.togglePlayback():77==b&&D()});var sa="normal";L.on("fullscreenchange mozfullscreenchange MSFullscreenChange webkitfullscreenchange",function(a){"fullscreen"==sa?(sa="normal",Ba.find("img").attr("src","data/icons/fullscreen_enter.png"),
    d("html").removeClass("vb-overflow"),u.removeClass("vb-fullscreen")):(sa="fullscreen",Ba.find("img").attr("src","data/icons/fullscreen_exit.png"),d("html").addClass("vb-overflow"),u.addClass("vb-fullscreen"))});var Ba=u.find(".fullscreen-toggle").on("click",function(a){a=document.documentElement;a.requestFullscreen?document.fullscreenElement?document.exitFullscreen():a.requestFullscreen():a.webkitRequestFullScreen?document.webkitIsFullScreen?document.webkitCancelFullScreen():a.webkitRequestFullScreen():
    a.msRequestFullscreen?document.msIsFullscreen||document.msFullscreenElement?document.msExitFullscreen():a.msRequestFullscreen():a.mozRequestFullScreen&&(document.fullscreenElement||document.mozFullScreenElement?document.mozCancelFullScreen():a.mozRequestFullScreen())}),Z,ga=u.find(".progress-bg"),Aa=u.find(".load-level"),za=u.find(".progress-level"),C=ga.width();if("ontouchstart"in window){T="touchstart.ap mousedown.ap";var M="touchmove.ap mousemove.ap";var N="touchend.ap mouseup.ap"}else window.PointerEvent?
    (T="pointerdown.ap",M="pointermove.ap",N="pointerup.ap"):(T="mousedown.ap",M="mousemove.ap",N="mouseup.ap");u.find(".seekbar").on(T,function(a){Y(a);return!1});var ha=.5,aa,ua=u.find(".volume-wrapper"),Ha=u.find(".volume-toggle"),X=u.find(".volume-seekbar"),ca=u.find(".volume-bg"),Da=u.find(".volume-level"),ba=X.hasClass("vertical")?!0:!1;ba?X.height():X.width();var ia=ba?ca.height():ca.width();c();0>q?q=0:1<q&&(q=1);0!=q&&(ha=q);Ha.on("click",function(a){X.toggle()});X.on(T,function(a){r(a);return!1});
    var v=new VBPlaylistManager({randomPlay:l.randomPlay,loopingOn:l.loopingOn});d(v).on("VBPlaylistManager.COUNTER_READY",function(){k&&t();h=W[v.getCounter()];k=h.type;"video"==k?S?A():m():"youtube"==k&&J();d(y).trigger("mediaTriggered")});var ta;Ga.on("resize",function(){if(!p)return!1;ta&&clearTimeout(ta);ta=setTimeout(Fa,150)});this.playMedia=function(){if(!p||G)return!1;"video"==k?e&&e.play():"youtube"==k&&f&&f.play();G=!0};this.pauseMedia=function(){if(!p||!G)return!1;"video"==k?e&&e.pause():"youtube"==
        k&&f&&f.pauseVideo();G=!1};this.togglePlayback=function(){if(!p)return!1;if("video"==k)O?e&&(e.paused?e.play():e.pause()):(b(),A());else if("youtube"==k&&f){var a=f.getPlayerState();1==a?f.pauseVideo():2==a?f.playVideo():-1!=a&&5!=a&&0!=a||f.playVideo()}};this.nextMedia=function(){if(!p)return!1;qa()};this.previousMedia=function(){if(!p)return!1;p&&v.advanceHandler(-1,!0)};this.setVolume=function(a){if(!p)return!1;0>a?a=0:1<a&&(a=1);c(a)};this.toggleMute=function(){if(!p)return!1;D()};this.seek=function(a){if(!p)return!1;
        "video"==k?e&&(e.currentTime=a):"youtube"==k&&f&&f.seekTo(a)};this.getCurrentTime=function(){if(!p)return!1;if("video"==k){if(e)var a=e.currentTime}else"youtube"==k&&f&&(a=f.getCurrentTime());return a};this.getDuration=function(){if(!p)return!1;if("video"==k){if(e)var a=e.duration}else"youtube"==k&&f&&(a=f.getDuration());return a};this.setPlaybackRate=function(a){if(!p)return!1;"video"==k?e&&(e.playbackRate=Number(a)):"youtube"==k&&f&&f.setPlaybackRate(Number(a))};this.setQuality=function(a){if(!p)return!1;
        "youtube"==k&&f&&(f.pauseVideo(),f.setPlaybackQuality(a),f.playVideo())};this.setRandom=function(a){if(!p)return!1;"undefined"!==typeof v&&v.setRandom(a)};this.setLooping=function(a){if(!p)return!1;"undefined"!==typeof v&&v.setLooping(a)};this.destroyMedia=function(){if(!p)return!1;t()};this.loadMedia=function(a){if(!p||"undefined"===typeof v)return!1;"number"===typeof a?(0>a?a=0:a>U-1&&(a=U-1),v.processPlaylistRequest(a)):(W.push(a),U=W.length,v.setPlaylistItems(U),v.setCounter(U-1,!1))};this.getMediaPlaying=
        function(){return p?G:!1};var p=!0;d(y).trigger("setupDone");W=l.media;var U=W.length;v.setPlaylistItems(U);v.setCounter(0,!1);return this}}})(jQuery);
(function(d,l){d.VBPlaylistManager=function(d){function x(){if(!(3>c)){var b=c,g=[],m=[],d;for(d=0;d<b;d++)g[d]=d;for(d=0;d<b;d++){var l=Math.round(Math.random()*(g.length-1));m[d]=g[l];g.splice(l,1)}t=m}}var r=this,D=d.loopingOn,g=d.randomPlay,c,m=!1,b=-1,A,J,w=!1,t=[],I=!1;this.setCounter=function(n,d){"undefined"===typeof d&&(d=!0);b=d?b+parseInt(n,10):parseInt(n,10);if(isNaN(b))alert("VBPlaylistManager message: No active media, counter = "+b);else if(m=!1,D){if(g)if(b>c-1){b=t[c-1];x();if(t[0]==
    b){var A=t.splice(0,1);t.push(A)}b=0;l(r).trigger("VBPlaylistManager.PLAYLIST_END_ALERT")}else 0>b&&(b=t[0],x(),t[c-1]==b&&(A=t.splice(c-1,1),t.unshift(A)),b=c-1);else b>c-1?(b=0,l(r).trigger("VBPlaylistManager.PLAYLIST_END_ALERT")):0>b&&(b=c-1);l(r).trigger("VBPlaylistManager.COUNTER_READY")}else b>c-1?(b=c-1,m=!0):0>b&&(b=0),m?l(r).trigger("VBPlaylistManager.PLAYLIST_END"):l(r).trigger("VBPlaylistManager.COUNTER_READY")};this.getCounter=function(){return g?I?b:t[b]:b};this.advanceHandler=function(n){I=
    !1;w?(w=!1,J+n>c-1?(b=c-1,l(r).trigger("VBPlaylistManager.COUNTER_READY")):0>J+n?(b=0,l(r).trigger("VBPlaylistManager.COUNTER_READY")):setCounter(J+n,!1)):r.setCounter(n)};this.processPlaylistRequest=function(c){I=!1;g&&(I=!0,A=c,w||(J=b,w=!0));r.setCounter(c,!1)};this.setPlaylistItems=function(n,d){"undefined"===typeof d&&(d=!0);d&&(b=-1);c=n;g&&x()};this.reSetCounter=function(n){"undefined"===typeof n?b=-1:(n=parseInt(n,10),c?(n>c-1?n=c-1:0>n&&(n=0),b=n):b=-1)};this.setRandom=function(c){(g=c)&&
x();if(g){var d=t.length;for(c=0;c<d;c++)if(t[c]==b){if(0==c)break;c=t.splice(c,1);t.unshift(parseInt(c,10));break}b=0}else w?(b=A,w=!1):b=t[b]};this.setLooping=function(b){D=b};this.getPosition=function(b){return t.indexOf(b)}}})(window,jQuery);
(function(d,l){function Y(d,g,c,m){var b={},l=c.width();c=c.height();m=x(g,m);g=m.width;m=m.height;var D=(l-0)/(c-0),r=g/m;r<D?d?(b.width=(c-0)/m*g,b.height=c-0):(b.height=(l-0)/g*m,b.width=l-0):r>D?d?(b.height=(l-0)/g*m,b.width=l-0):(b.width=(c-0)/m*g,b.height=c-0):(b.width=l-0,b.height=c-0);return b}function x(d,g){var c={};"video"==d?g[0].videoWidth&&g[0].videoHeight?(c.width=g[0].videoWidth,c.height=g[0].videoHeight):(c.width=640,c.height=360):"youtube"==d?g.videoWidth&&g.videoHeight?(c.width=
    g.videoWidth,c.height=g.videoHeight):(c.width=640,c.height=360):"image"==d&&(c.width=g.width(),c.height=g.height());return c}var r=function(){};r.resizeMedia=function(d,g,c,m){var b,l=c.width();var r=c.height();0==g?b=x(d,m):1==g?b=Y(!0,d,c,m):2==g&&(b=Y(!1,d,c,m));d=parseInt((l-b.width)/2,10);r=parseInt((r-b.height)/2,10);/*m.css({width:b.width+"px",height:b.height+"px",left:d+"px",top:r+"px"})*/};d.VBAspectRatio=r})(window,jQuery);